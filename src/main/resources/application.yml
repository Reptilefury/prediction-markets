server:
  port: ${PORT:8080}

spring:
  application:
    name: prediction-markets
  
  security:
    user:
      password: # Disable default password generation

  
  flyway:
    enabled: true
    baseline-on-migrate: true
    baseline-version: "0"
    url: ${JDBC_DATABASE_URL}
    user: ${DATABASE_USERNAME}
    password: ${DATABASE_PASSWORD}
    locations: classpath:db/migration
  
  r2dbc:
    url: ${DATABASE_URL}
    username: ${DATABASE_USERNAME}
    password: ${DATABASE_PASSWORD}
    pool:
      initial-size: 5
      max-size: 20
      max-idle-time: 30m
      validation-query: SELECT 1
  
  datasource:
    url: ${JDBC_DATABASE_URL}
    username: ${DATABASE_USERNAME}
    password: ${DATABASE_PASSWORD}
  
  data:
    r2dbc:
      repositories:
        enabled: true
    redis:
      host: ${REDIS_HOST}
      port: ${REDIS_PORT}
      password: ${REDIS_PASSWORD}
      timeout: 2000ms
      lettuce:
        pool:
          max-active: 8
          max-idle: 8
          min-idle: 0
  
  cloud:
    gcp:
      storage:
        bucket-name: prediction-markets-storage
        project-id: ${GCP_PROJECT_ID}
  
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 10MB
  autoconfigure:
    exclude:
      - org.apache.camel.component.reactive.streams.springboot.ReactiveStreamsServiceAutoConfiguration
      - org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration
  main:
    allow-circular-references: true

app:
  name: Oregon Markets
  base-url: ${BASE_URL}
  
  magic:
    api-key: ${MAGIC_API_KEY}
    api-url: ${MAGIC_API_URL}
  
  enclave:
    api-key: ${ENCLAVE_API_KEY}
    api-url: ${ENCLAVE_API_URL}
    destination-token-address: ${APP_ENCLAVE_DESTINATION_TOKEN_ADDRESS}
  
  blnk:
    api-url: ${BLNK_API_URL}
    ledger-id: ${BLNK_LEDGER_ID}

  crypto-service:
    base-url: ${CRYPTO_SERVICE_URL}

  walletconnect:
    project-id: ${WALLETCONNECT_PROJECT_ID}

  dynamic:
    environment-id: ${DYNAMIC_ENVIRONMENT_ID}

  logodev:
    publishable-key: ${LOGODEV_PUBLISHABLE_KEY:}

logging:
  level:
    com.oregonMarkets: DEBUG
    com.oregonMarkets.integration.magic: DEBUG

gcp:
  project-id: ${GCP_PROJECT_ID}
  pubsub:
    topics:
      universal-deposit-wallet: ${PUBSUB_TOPIC_WALLET}
    subscriptions:
      universal-deposit-wallet: ${PUBSUB_SUBSCRIPTION_WALLET}

camel:
  component:
    google-pubsub:
      project-id: ${GCP_PROJECT_ID}

keycloak:
  admin:
    base-url: ${KEYCLOAK_BASE_URL}
    realm: ${KEYCLOAK_REALM:opm-client}
    # Client credentials for admin API (not used in password grant, but kept for reference)
    client-id: ${KEYCLOAK_CLIENT_ID:admin-cli}
    client-secret: ${KEYCLOAK_CLIENT_SECRET:}
